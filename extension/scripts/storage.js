var loadException,removeException,saveException,saveListException,viewException;loadException=function(){return JSON.parse(localStorage.vkCommentBlocker?localStorage.vkCommentBlocker:'{"items":[]}')},viewException=function(e){var t,o,n,i,r,l;for(i=document.createElement("tbody"),t=r=0,l=e.items.length;0>l?r>l:l>r;t=0>l?--r:++r)o=e.items[t],n=i.insertRow(0),n.insertCell(0).innerHTML=t+1,n.insertCell(1).innerHTML=o.title,n.insertCell(2).innerHTML=o.url,n.insertCell(3).innerHTML='<button type="button" class="btn btn-remove" data-tools="remove" data-id='+(t+1)+">"+chrome.i18n.getMessage("exception_remove")+"</button>",i.appendChild(n);return i},saveException=function(e,t){var o,n,i,r,l;if(localStorage.vkCommentBlocker){for(o=loadException(),i=r=0,l=o.items.length;0>l?r>l:l>r;i=0>l?--r:++r)if(n=o.items[i].url,n.indexOf(t)>-1)return!0}else o=JSON.parse('{"items":[]}');o.items.push({title:e,url:t}),localStorage.vkCommentBlocker=JSON.stringify(o)},saveListException=function(e){var t;t=new FileReader,t.onload=function(){var e;e=t.result,localStorage.vkCommentBlocker=e},t.readAsText(e)},removeException=function(e){var t;t=loadException(),t.items.splice(e,1),0===t.items.length?localStorage.clear():localStorage.vkCommentBlocker=JSON.stringify(t)};
