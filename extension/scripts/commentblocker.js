var commentState,disableComments,enableComments,stateCommentToggle;commentState="",enableComments=function(){var e;null==document.getElementById("extension")&&(e=document.createElement("link"),e.href=chrome.extension.getURL("/styles/commentblocker_on.css"),e.id="extension",e.type="text/css",e.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(e))},disableComments=function(){document.getElementById("extension")&&document.getElementsByTagName("head")[0].removeChild(document.getElementById("extension"))},stateCommentToggle=function(e){console.log(document.getElementById("extension")),document.getElementById("extension")||1===commentState?(commentState=0,chrome.tabs.executeScript(e,{code:"("+disableComments.toString()+")();"})):(commentState=1,chrome.tabs.executeScript(e,{code:"("+enableComments.toString()+")();"}))},chrome.tabs.onUpdated.addListener(function(e,t,n){var o,m,c,s;if(m=loadException().items,"complete"===t.status&&n.url.indexOf("://vk.com/")>-1&&0!==m.length)for(commentState=0,chrome.tabs.executeScript(e,{code:"("+disableComments.toString()+")();"}),o=c=0,s=m.length-1;s>=0?s>=c:c>=s;o=s>=0?++c:--c)if(n.url.indexOf(m[o].url)>-1){commentState=1,chrome.tabs.executeScript(e,{code:"("+enableComments.toString()+")();"});break}});