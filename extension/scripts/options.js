(function(){document.addEventListener("DOMContentLoaded",function(){var e,t,o,n,l,i,c,a,r,d,s,m,u;e=document.getElementById("addExceptionModal"),n=document.getElementById("exportListException"),c=document.getElementById("importListException"),i=document.getElementById("importFileListException"),r=document.getElementById("modalAddingException"),d=document.getElementById("optionsExceptionMessage"),o=document.getElementById("exceptionTable"),m=document.getElementsByName("exception_title")[0],u=document.getElementsByName("exception_url")[0],t=document.getElementById("errorMessage"),e.addEventListener("click",function(){r.style.display="block"}),n.addEventListener("click",function(){s.listExport(this)}),c.addEventListener("click",function(e){s.listImport(e)}),r.querySelector('button[data-tools="cancel"]').addEventListener("click",function(){r.style.display="none",t.style.display="none",m.value="",u.value=""}),r.querySelector('button[data-tools="add"]').addEventListener("click",function(){s.save(m,u)}),a=function(){var e,t,o,n;for(e=document.querySelectorAll('button[data-tools="remove"]'),t=o=0,n=e.length;n>=0?n>o:o>n;t=n>=0?++o:--o)e[t].onclick=function(){s.remove(this.dataset.id-1)}},l=function(e){var t;t=e.target.files[0],t&&(saveListException(t),location.reload())},s={load:function(){var t,n;localStorage.vkCommentBlocker?(t=loadException(),s.view(t)):(d.style.display="block",o.style.display="none"),localStorage.vkCommentBlockerTemp&&(n=JSON.parse(localStorage.vkCommentBlockerTemp),m.value=n.title,u.value=n.url,e.click(),localStorage.removeItem("vkCommentBlockerTemp"))},view:function(e){var t,n;t=viewException(e),n=o.querySelector("tbody"),o.replaceChild(t,n),a()},save:function(e,o){""!==e.value&&""!==o.value?(saveException(e.value,o.value),r.querySelector('button[data-tools="cancel"]').click(),location.reload()):t.style.display="block"},remove:function(e){removeException(e),location.reload()},listExport:function(e){var t,o;o=JSON.stringify(loadException()),t=new Blob([o],{type:"application/json"}),e.download="VKCommentBlocker.json",e.href=URL.createObjectURL(t)},listImport:function(){i.click(),i.addEventListener("change",l,!1)}},s.load()})}).call(this);