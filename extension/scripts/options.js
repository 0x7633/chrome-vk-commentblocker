(function(){document.addEventListener("DOMContentLoaded",function(){var e,t,n,o,i,l,c,r,a,s,m,d,u;e=document.getElementById("addExceptionModal"),o=document.getElementById("exportListException"),c=document.getElementById("importListException"),l=document.getElementById("importFileListException"),a=document.getElementById("modalAddingException"),s=document.getElementById("optionsWelcome"),n=document.getElementById("exceptionTable"),d=document.getElementsByName("exception_title")[0],u=document.getElementsByName("exception_url")[0],t=document.getElementById("errorMessage"),e.addEventListener("click",function(){a.style.display="block"}),o.addEventListener("click",function(){m.listExport(this)}),c.addEventListener("click",function(e){m.listImport(e)}),a.querySelector('button[data-tools="cancel"]').addEventListener("click",function(){a.style.display="none",t.style.display="none",d.value="",u.value="/"}),a.querySelector('button[data-tools="add"]').addEventListener("click",function(){m.save(d,u)}),r=function(){var e,t,n,o;for(e=document.querySelectorAll('button[data-tools="remove"]'),t=n=0,o=e.length;o>=0?o>n:n>o;t=o>=0?++n:--n)e[t].onclick=function(){confirm(chrome.i18n.getMessage("exception_remove_confirm"))&&m.remove(this.dataset.id-1)}},i=function(e){var t;t=e.target.files[0],t&&(saveListException(t),location.reload())},m={load:function(){var t,o;localStorage.vkCommentBlocker?(t=loadException(),m.view(t)):(s.style.display="block",n.style.display="none"),localStorage.vkCommentBlockerTemp&&(o=JSON.parse(localStorage.vkCommentBlockerTemp),d.value=o.title,u.value=o.url,e.click(),localStorage.removeItem("vkCommentBlockerTemp"))},view:function(e){var t,o;t=viewException(e),o=n.querySelector("tbody"),n.replaceChild(t,o),r()},save:function(e,n){""!==e.value&&""!==n.value?saveException(e.value,n.value)?(alert(chrome.i18n.getMessage("exception_exists")),a.querySelector('button[data-tools="cancel"]').click()):location.reload():t.style.display="block"},remove:function(e){removeException(e),location.reload()},listExport:function(e){var t,n;n=JSON.stringify(loadException()),t=new Blob([n],{type:"application/json"}),e.download="VKCommentBlocker.json",e.href=URL.createObjectURL(t)},listImport:function(){l.click(),l.addEventListener("change",i,!1)}},m.load()})}).call(this);