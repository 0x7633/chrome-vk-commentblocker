document.addEventListener("DOMContentLoaded",function(){var e,t,o,n,i,l,r,c,a,s,m,d,v;e=document.getElementById("addExceptionModal"),n=document.getElementById("exportListException"),r=document.getElementById("importListException"),l=document.getElementById("importFileListException"),a=document.getElementById("modalAddingException"),s=document.getElementById("optionsWelcome"),o=document.getElementById("exceptionTable"),d=document.getElementsByName("exception_title")[0],v=document.getElementsByName("exception_url")[0],t=document.getElementById("errorMessage"),e.addEventListener("click",function(){a.style.display="block"}),n.addEventListener("click",function(){m.listExport(this)}),r.addEventListener("click",function(e){m.listImport(e)}),a.querySelector('button[data-tools="cancel"]').addEventListener("click",function(){a.style.display="none",t.style.display="none",d.value="",v.value="/"}),a.querySelector('button[data-tools="add"]').addEventListener("click",function(){m.save(d,v)}),c=function(){var e,t,o,n;for(e=document.querySelectorAll('button[data-tools="remove"]'),t=o=0,n=e.length;0>n?o>n:n>o;t=0>n?--o:++o)e[t].onclick=function(){confirm(chrome.i18n.getMessage("exception_remove_confirm"))&&m.remove(this.dataset.id-1)}},i=function(e){var t;t=e.target.files[0],t&&(saveListException(t),location.reload())},m={load:function(){var t,n;localStorage.vkCommentBlocker?(t=loadException(),m.view(t)):(s.style.display="block",o.style.display="none"),localStorage.vkCommentBlockerTemp&&(n=JSON.parse(localStorage.vkCommentBlockerTemp),d.value=n.title,v.value=n.url,e.click(),localStorage.removeItem("vkCommentBlockerTemp"))},view:function(e){var t,n;t=viewException(e),n=o.querySelector("tbody"),o.replaceChild(t,n),c()},save:function(e,o){""!==e.value&&""!==o.value?saveException(e.value,o.value)?(alert(chrome.i18n.getMessage("exception_exists")),a.querySelector('button[data-tools="cancel"]').click()):location.reload():t.style.display="block"},remove:function(e){removeException(e),location.reload()},listExport:function(e){var t,o;o=JSON.stringify(loadException()),t=new Blob([o],{type:"application/json"}),e.href=URL.createObjectURL(t)},listImport:function(){l.click(),l.addEventListener("change",i,!1)}},m.load()});
